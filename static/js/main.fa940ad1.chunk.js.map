{"version":3,"sources":["pages/homePage/HomePage.module.css","pages/orgChartPage/OrgChartPage.module.css","core/appContext.ts","components/company/Company.tsx","core/CompanyClass.ts","components/uploadDialog/UploadDialog.tsx","pages/homePage/HomePage.tsx","pages/orgChartPage/OrgChartPage.tsx","App.tsx","index.tsx","components/company/Company.module.css","components/uploadDialog/UploadDialog.module.css"],"names":["module","exports","DefaultContext","companies","AppContext","React","createContext","getPosition","index","count","Company","level","orgNumber","position","company","useContext","find","c","organizationalNumber","companyName","internalCompanyName","parentShares","subsidiaries","parentCount","parentCompany","length","rootClass","s","root","noBorder","className","border","borderOff","borderOn","join","companyMultiParent","name","map","subsidiary","CompanyClass","line","companyType","acquisition","acquisitionRegistrationDate","boardSeat","boardMembers","auditor","shareInSubsidiaries","administeredBy","split","this","UploadDialog","onCloseClick","context","history","useHistory","id","modal","content","header","inputBox","type","onChange","event","file","target","files","reader","FileReader","onload","fileContent","result","array","replace","x","startsWith","slice","filter","endsWith","getLines","push","readAsText","footer","onClick","HomePage","useState","isUploadDialogOpen","setUploadDialogOpen","companyCount","OrgChartPage","topCompany","App","Provider","value","src","alt","to","path","render","page","Root","StrictMode","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.fa940ad1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"HomePage_root__1-Mwu\",\"companyCount\":\"HomePage_companyCount__fry03\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"OrgChartPage_root__2P_Ar\",\"companyCount\":\"OrgChartPage_companyCount__3iPNW\"};","import React from \"react\";\r\nimport { CompanyClass } from \"./CompanyClass\";\r\n\r\nexport type AppContextType = {\r\n  companies: CompanyClass[];\r\n};\r\n\r\nexport const DefaultContext: AppContextType = {\r\n  companies: [],\r\n};\r\n\r\nexport const AppContext = React.createContext(DefaultContext);\r\n","import React, { useContext } from \"react\";\nimport { AppContext, AppContextType } from \"../../core/appContext\";\nimport s from \"./Company.module.css\";\n\nconst maxLevel = 10; // prevent accidental infinite loop\n\nconst getPosition = (index: number, count: number) => {\n  if (count === 1) return \"single\";\n  if (index === 0) return \"left\";\n  if (index === count - 1) return \"right\";\n  return \"middle\";\n};\n\ntype Props = {\n  level: number;\n  orgNumber: string;\n  position: string; // s.left, s.middle, s.right\n};\n\n// ----------\n// COMPONENT:\nconst Company = ({ level, orgNumber, position }: Props) => {\n  // CONTEXT:\n  const context: AppContextType = useContext(AppContext);\n  const { companies } = context;\n\n  const company = companies.find(c => c.organizationalNumber === orgNumber);\n  if (!company) return <div>Orgnr not found: {orgNumber}</div>;\n\n  const {\n    companyName,\n    internalCompanyName,\n    parentShares,\n    subsidiaries,\n  } = company;\n\n  const parentCount = company.parentCompany.length;\n\n  const rootClass =\n    s.root + \" \" + (level === 1 || subsidiaries.length === 0 ? s.noBorder : \"\");\n\n  return (\n    <div className={rootClass}>\n      {/* CONNECTION LINES: */}\n      {level > 1 && position !== \"single\" && (\n        <div className={s.border}>\n          <div className={position === \"left\" ? s.borderOff : s.borderOn}></div>\n          <div\n            className={position === \"right\" ? s.borderOff : s.borderOn}\n          ></div>\n        </div>\n      )}\n      {level > 1 && position !== \"single\" && <div>|</div>}\n      {level > 1 && <div>{parentShares.join(\" \")}</div>}\n      {level > 1 && <div>↓</div>}\n\n      {/* COMPANY BOX: */}\n      <div\n        className={\n          s.company + \" \" + (parentCount > 1 ? s.companyMultiParent : \"\")\n        }\n      >\n        <div className={s.name}>{companyName}</div>\n        <div>{internalCompanyName}</div>\n        <div>{orgNumber}</div>\n      </div>\n\n      {/* CONNECTION LINES: */}\n      {subsidiaries.length > 0 && <div>|</div>}\n\n      {/* SUBSIDIARIES: */}\n      {subsidiaries.length > 0 && level < maxLevel && (\n        <div className={s.subsidiaries}>\n          {subsidiaries.map((subsidiary, index) => (\n            <Company\n              key={subsidiary}\n              level={level + 1}\n              orgNumber={subsidiary}\n              position={getPosition(index, subsidiaries.length)}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Company;\n","export class CompanyClass {\r\n  companyName: string;\r\n  organizationalNumber: string;\r\n  internalCompanyName: string;\r\n  companyType: string;\r\n  acquisition: boolean;\r\n  acquisitionRegistrationDate: string;\r\n  boardSeat: string;\r\n  boardMembers: string[];\r\n  auditor: string;\r\n  parentCompany: string[];\r\n  parentShares: string[];\r\n  subsidiaries: string[];\r\n  shareInSubsidiaries: string[];\r\n  administeredBy: string;\r\n\r\n  constructor(line: string) {\r\n    const s = line.split(\";\");\r\n\r\n    this.companyName = s[0];\r\n    this.organizationalNumber = s[1];\r\n    this.internalCompanyName = s[2];\r\n    this.companyType = s[3];\r\n    this.acquisition = s[4] === \"YES\";\r\n    this.acquisitionRegistrationDate = s[5];\r\n    this.boardSeat = s[6];\r\n    this.boardMembers = s[7].split(\"|\");\r\n    this.auditor = s[8];\r\n    this.parentCompany = s[9] === \"\" ? [] : s[9].split(\"|\");\r\n    this.parentShares = s[10].split(\"|\");\r\n    this.subsidiaries = s[11] === \"\" ? [] : s[11].split(\"|\");\r\n    this.shareInSubsidiaries = s[12].split(\"|\");\r\n    this.administeredBy = s[13];\r\n  }\r\n}\r\n","import React, { useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { CompanyClass } from \"../../core/CompanyClass\";\nimport { AppContext, AppContextType } from \"../../core/appContext\";\nimport s from \"./UploadDialog.module.css\";\n\ntype Props = {\n  onCloseClick: (event: any) => void;\n};\n\n// ----------\n// COMPONENT:\nconst UploadDialog = ({ onCloseClick }: Props) => {\n  // CONTEXT:\n  const context: AppContextType = useContext(AppContext);\n\n  const history = useHistory();\n\n  // FUNCTIONS:\n  // Assumption: file does not contain \"|\".\n  // todo: check that it does not.\n  const getLines = (fileContent: string) => {\n    return (\";\" + fileContent)\n      .replace(/\\r/g, \"\")\n      .split('\"\"')\n      .map(x => (x.startsWith(\";\") ? x : x.replace(/;/g, \"|\")))\n      .join(\"\")\n      .split(\"\\n\") // get lines\n      .slice(1) // skip the first\n      .filter(line => line.length > 0) // skip empty\n      .map(x => (x.startsWith('\"') ? x.slice(1) : x))\n      .map(x => (x.endsWith('\"') ? x.slice(0, -1) : x));\n  };\n\n  // http://jsfiddle.net/Noitidart/zTe4j/3/\n  const getFileContent = () => {\n    return function (event: any) {\n      const fileContent = event.target.result;\n\n      if (fileContent.length > 0) {\n        const lines = getLines(fileContent);\n        const array = lines.map(line => new CompanyClass(line));\n        context.companies = array;\n      }\n\n      history.push(\"/orgchart\");\n      onCloseClick(null);\n    };\n  };\n\n  const onFileChange = (event: any) => {\n    var file = event.target.files[0];\n    var reader = new FileReader();\n    reader.onload = getFileContent();\n    reader.readAsText(file);\n  };\n\n  return (\n    <div className={s.root}>\n      <div id=\"myModal\" className={s.modal}>\n        <div className={s.content}>\n          <div className={s.header}>Ladda upp en Excel-fil</div>\n\n          <div className={s.inputBox}>\n            <input type=\"file\" onChange={onFileChange} />\n          </div>\n\n          <div className={s.footer}>\n            <button onClick={onCloseClick}>Stänga</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default UploadDialog;\n","import React, { useState, useContext } from \"react\";\r\nimport { AppContext, AppContextType } from \"../../core/appContext\";\r\nimport { UploadDialog } from \"../../components\";\r\nimport s from \"./HomePage.module.css\";\r\n\r\nconst HomePage = () => {\r\n  // CONTEXT:\r\n  const context: AppContextType = useContext(AppContext);\r\n\r\n  // STATE:\r\n  const [isUploadDialogOpen, setUploadDialogOpen] = useState(false);\r\n\r\n  return (\r\n    <div className={s.root}>\r\n      <h2>Home</h2>\r\n\r\n      <div className={s.companyCount}>\r\n        Companies: {context.companies.length}\r\n      </div>\r\n\r\n      <button onClick={() => setUploadDialogOpen(true)}>\r\n        Ladda upp en Excel-fil\r\n      </button>\r\n\r\n      {isUploadDialogOpen && (\r\n        <UploadDialog onCloseClick={() => setUploadDialogOpen(false)} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import React, { useContext } from \"react\";\r\nimport { AppContext, AppContextType } from \"../../core/appContext\";\r\nimport { Company } from \"../../components\";\r\nimport s from \"./OrgChartPage.module.css\";\r\n\r\nconst OrgChartPage = () => {\r\n  // CONTEXT:\r\n  const context: AppContextType = useContext(AppContext);\r\n  const { companies } = context;\r\n  const topCompany = companies.find(c => !c.parentCompany.length);\r\n\r\n  if (!topCompany) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={s.root}>\r\n      <h2>Organisation Chart</h2>\r\n\r\n      <div className={s.companyCount}>\r\n        Companies: {context.companies.length}\r\n      </div>\r\n\r\n      <div>\r\n        <Company\r\n          level={1}\r\n          position=\"middle\"\r\n          orgNumber={topCompany.organizationalNumber}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrgChartPage;\r\n","import React from \"react\";\nimport { Link, Route, Switch } from \"react-router-dom\";\nimport { AppContext, DefaultContext } from \"./core/appContext\";\nimport { HomePage, OrgChartPage } from \"./pages\";\nimport \"./App.css\";\n\nconst route = (path: string, page: any) => <Route path={path}>{page}</Route>;\n\nfunction App() {\n  return (\n    <AppContext.Provider value={DefaultContext}>\n      <div className=\"app\">\n        <div className=\"app-header\">\n          <img src=\"kpmg-logo.jpg\" alt=\"kpmg\" className=\"kpmg-logo\" />\n\n          <div>Entity Manager</div>\n\n          <div className=\"menu\">\n            <Link to=\"/\">Home</Link>\n            <Link to=\"/orgchart\">Chart</Link>\n          </div>\n        </div>\n\n        <Switch>\n          <Route path=\"/orgchart\" render={() => <OrgChartPage />} />\n\n          {route(\"/\", <HomePage />)}\n        </Switch>\n      </div>\n    </AppContext.Provider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nconst Root = () => (\n  <BrowserRouter>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </BrowserRouter>\n);\n\nReactDOM.render(<Root />, document.getElementById(\"root\"));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Company_root__3K53b\",\"noBorder\":\"Company_noBorder__3F0MP\",\"company\":\"Company_company__4Rd7M\",\"companyMultiParent\":\"Company_companyMultiParent__1agNq\",\"name\":\"Company_name__nbf2i\",\"subsidiaries\":\"Company_subsidiaries__kqZF7\",\"border\":\"Company_border__1RQxm\",\"borderOn\":\"Company_borderOn__gWSHR\",\"borderOff\":\"Company_borderOff__1tTE6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"UploadDialog_root__2v1ih\",\"modal\":\"UploadDialog_modal__3DWdg\",\"content\":\"UploadDialog_content__1vpgk\",\"header\":\"UploadDialog_header__ekqbB\",\"inputBox\":\"UploadDialog_inputBox__39NQ0\",\"inputFile\":\"UploadDialog_inputFile__1oZB5\",\"footer\":\"UploadDialog_footer__3KnTh\"};"],"sourceRoot":""}